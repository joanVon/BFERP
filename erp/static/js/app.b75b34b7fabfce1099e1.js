webpackJsonp([1],{"/sR4":function(t,e){},0:function(t,e,n){n("zFrg"),n("j1ja"),t.exports=n("NHnr")},"1WJf":function(t,e){},"1ii1":function(t,e){},"7LaA":function(t,e){},"7Lez":function(t,e){},E3ct:function(t,e){},JuUI:function(t,e){},NHnr:function(t,e,n){"use strict";function a(t){return v.a.set(g,t)}function o(){return v.a.remove(g)}function r(t){n("d/Py")}function s(t){n("1ii1")}function i(t){n("7Lez")}function c(t){n("hlwg")}function l(t){n("q9os")}Object.defineProperty(e,"__esModule",{value:!0});var u=(n("j1ja"),n("7+uW")),m=n("NYxO"),p=n("zL8q"),d=n.n(p),f=(n("uMhA"),n("JuUI"),n("E3ct"),n("w7nl"),n("lbHh")),v=n.n(f),g="Access-Token",h=(n("7LaA"),{name:"Header",data:function(){return{}},computed:{username:function(){return JSON.parse(sessionStorage.getItem("loginInfo")).account}},methods:{goToUserInfo:function(){this.$router.push({name:"UserInfo"})},logOut:function(){o(),this.$router.push({name:"Login"})}},mounted:function(){}}),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"layout-header"},[n("div",{staticClass:"layout-header-inner"},[t._m(0),t._v(" "),n("div",{staticClass:"layout-header-btns"},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link"},[n("span",[t._v(t._s(t.username))]),t._v(" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){return t.goToUserInfo(e)}}},[t._v("个人信息")]),t._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){return t.logOut(e)}}},[t._v("退出")])],1)],1)],1)])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-header-logo"},[a("img",{attrs:{src:n("T425"),alt:""}}),t._v(" "),a("span",[t._v("百福ERP管理系统")])])}],D={render:b,staticRenderFns:_},k=D,F=n("VU/8"),y=r,A=F(h,k,!1,y,"data-v-4223e653",null),T=A.exports,w={name:"Layout",components:{Header:T},data:function(){return{isCollapse:!1}},computed:{sidebar:function(){var t=this.$store.getters.sidebar,e=JSON.parse(sessionStorage.getItem("loginInfo"));return e&&(t=e.sideBarMenu),t},activePath:function(){return"/"+this.$route.path.split("/")[1]}},mounted:function(){},methods:{handleOpen:function(t,e){},handleClose:function(t,e){}}},C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-view"},[n("Header"),t._v(" "),n("el-button",{staticClass:"collapse-menu-btn",class:!1===t.isCollapse?"":"put-left",on:{click:function(e){t.isCollapse=!t.isCollapse}}},[n("i",{staticClass:"icon-erp icon-collapse-btn"})]),t._v(" "),n("nav",{staticClass:"layout-sidebar"},[n("el-menu",{staticClass:"el-menu-vertical-erp",attrs:{"default-active":t.activePath,router:"",collapse:t.isCollapse,"background-color":"#333744","text-color":"#f8f8f8"},on:{open:t.handleOpen,close:t.handleClose}},t._l(t.sidebar,function(e,a){return n("el-submenu",{key:a,attrs:{index:""+a}},[n("template",{slot:"title"},[n("i",{staticClass:"icon-erp",class:"icon-nav-"+a}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])]),t._v(" "),t._l(e.childrenItems,function(e,a){return n("el-menu-item",{key:a,attrs:{index:e.index}},[t._v("\n          "+t._s(e.name)+"\n        ")])})],2)}))],1),t._v(" "),n("div",{staticClass:"layout-container",class:{"container-collapse":t.isCollapse}},[n("div",{staticClass:"page"},[n("router-view")],1)])],1)},x=[],I={render:C,staticRenderFns:x},B=I,E=n("VU/8"),S=s,L=E(w,B,!1,S,"data-v-aa39a640",null),R=L.exports,N={name:"app",components:{Layout:R},data:function(){return{noHeader:!1}},watch:{$route:function(t,e){switch(t.path.split("/")[1]){case void 0:case"":this.noHeader=!1;break;default:this.noHeader=!0}}},beforeMount:function(){switch(this.$route.path.split("/")[1]){case void 0:case"":this.noHeader=!1;break;default:this.noHeader=!0}}},$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n(t.noHeader?"Layout":"router-view")],1)},M=[],P={render:$,staticRenderFns:M},U=P,H=n("VU/8"),O=i,V=H(N,U,!1,O,null,null),q=V.exports,J=n("Gu7T"),z=n.n(J),j=n("/ocq"),Q=(n("1WJf"),{name:"login",data:function(){return{loginForm:{account:"",pwd:""}}},methods:{login:function(){var t=this;this.$store.dispatch("LoginByUsername",this.loginForm).then(function(){t.$router.push({name:"Account"})})}}}),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-page"},[a("div",{staticClass:"top-right"}),t._v(" "),a("div",{staticClass:"bottom-left"}),t._v(" "),a("div",{staticClass:"login-content"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm}},[a("div",{staticClass:"login-logo"},[a("img",{attrs:{src:n("T425"),alt:""}}),t._v(" "),a("div",[t._v("百福ERP登录")])]),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.login()}},model:{value:t.loginForm.account,callback:function(e){t.$set(t.loginForm,"account",e)},expression:"loginForm.account"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.login()}},model:{value:t.loginForm.pwd,callback:function(e){t.$set(t.loginForm,"pwd",e)},expression:"loginForm.pwd"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-top":"42px"},attrs:{label:""}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])},Z=[],W={render:G,staticRenderFns:Z},K=W,Y=n("VU/8"),X=c,tt=Y(Q,K,!1,X,"data-v-4f5518bc",null),et=tt.exports,nt=[{path:"/",name:"Login",component:et}],at={name:"Intent"},ot=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"page-content home"})},rt=[],st={render:ot,staticRenderFns:rt},it=st,ct=n("VU/8"),lt=ct(at,it,!1,null,null,null),ut=lt.exports,mt=[{path:"/intent",name:"Intent",component:ut}],pt=(n("/sR4"),{name:"DepartmentNav",props:{isSimpleData:{type:Boolean,default:!1},nav:{type:Array,default:function(){return[]}}},data:function(){return{departmentMenu:this.nav}},methods:{getByDepart:function(t){this.$emit("getByDepartment",t)}},created:function(){this.isSimpleData}}),dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"department-menu"},[t._m(0),t._v(" "),n("el-menu",[t._l(t.nav,function(e){return[e.childrenItems.length?n("el-submenu",{attrs:{index:""+e.id}},[n("template",{slot:"title"},[n("span",{staticClass:"department-nav-title",attrs:{slot:"title"},on:{click:function(n){t.getByDepart(e)}},slot:"title"},[t._v(t._s(e.name))])]),t._v(" "),t._l(e.childrenItems,function(e,a){return n("el-menu-item",{key:a,attrs:{index:""+e.id}},[n("span",{staticClass:"department-nav-title",on:{click:function(n){t.getByDepart(e)}}},[t._v(t._s(e.name))])])})],2):n("el-menu-item",{attrs:{index:""+e.id}},[n("span",{staticClass:"department-nav-title",attrs:{slot:"title"},on:{click:function(n){t.getByDepart(e)}},slot:"title"},[t._v(t._s(e.name))])])]})],2)],1)},ft=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-root"},[n("i",{staticClass:"icon-erp icon-root"}),t._v(" "),n("span",[t._v("部门架构")])])}],vt={render:dt,staticRenderFns:ft},gt=vt,ht=n("VU/8"),bt=ht(pt,gt,!1,null,null,null),_t=bt.exports,Dt=n("//Fk"),kt=n.n(Dt),Ft=n("mtWM"),yt=n.n(Ft),At=yt.a.create({timeout:1e4,withCredentials:!1,headers:{"X-Requested-With":"XMLHttpRequest"}});At.interceptors.request.use(function(t){return t.mask=!1,t.url+="?t="+Date.now(),t},function(t){return kt.a.reject(t)}),At.interceptors.response.use(function(t){return 1*t.data.ret!=0?(t.data.msg?(1*t.data.ret==100003&&(location.href=window.location.origin),p.Notification.error({message:t.data.msg})):p.Notification.error({message:"请求异常"}),kt.a.reject(t.data.ret)):kt.a.resolve({message:t.data.msg,data:t.data.data})},function(t){return p.Notification.error({message:"系统异常"}),kt.a.reject(t)});var Tt=At,wt=n("mw3O"),Ct=n.n(wt),xt={getDepartmentAll:function(t){return Tt.get("/service/v1/department/listAll",{headers:{token:t}})},getAllAccount:function(t){return Tt.get("/service/v1/user/list",{headers:{token:t}})},getAccountByDepart:function(t,e){return Tt.get("/service/v1/user/departmentId/"+e+"/list",{headers:{token:t}})},addSaveAccount:function(t,e){return Tt.post("/service/v1/user",Ct.a.stringify(e),{headers:{token:t}})},modifySaveAccount:function(t,e,n){return Tt.put("/service/v1/user/id/"+n,Ct.a.stringify(e),{headers:{token:t}})},getDepartmentTop:function(t,e){return Tt.get("/service/v1/department/level/"+e,{headers:{token:t}})},getDepartmentByLevel:function(t,e){return Tt.get("/service/v1/department/id/"+e+"/children",{headers:{token:t}})},getPositionById:function(t,e){return Tt.get("/service/v1/department/position/departmentId/"+e,{headers:{token:t}})},getAccountById:function(t,e){return Tt.get("/service/v1/user/id/"+e,{headers:{token:t}})},deleteAccount:function(t,e){return Tt.delete("/service/v1/user/id/"+e,{headers:{token:t}})}},It={components:{DepartmentNav:_t},data:function(){return{departData:[],accountTable:[]}},computed:{accessToken:function(){return this.$store.getters.token}},methods:{addAccount:function(){this.$router.push({name:"ModifyAccount",params:{id:"add"}})},modifyRow:function(t){this.$router.push({name:"ModifyAccount",params:{id:t.id}})},deleteRow:function(t){var e=this;this.$confirm("是否确定删除该账号？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){xt.deleteAccount(e.accessToken,t.id).then(function(t){e.getAccountTable()})}).catch(function(){})},getDepartmentList:function(){var t=this;xt.getDepartmentAll(this.accessToken).then(function(e){t.departData=e.data})},getAccountTable:function(){var t=this;xt.getAllAccount(this.accessToken).then(function(e){t.accountTable=e.data})},getTableByDepart:function(t){var e=this;xt.getAccountByDepart(this.accessToken,t).then(function(t){e.accountTable=t.data})},getInfoByDepart:function(t){this.getTableByDepart(t.id)}},beforeMount:function(){this.getDepartmentList(),this.getAccountTable()}},Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content page-left-nav account"},[n("department-nav",{attrs:{nav:t.departData,isSimpleData:!0},on:{getByDepartment:t.getInfoByDepart}}),t._v(" "),n("div",{staticClass:"table-container"},[n("div",{staticClass:"page-toolbar"},[n("div",{staticClass:"page-title"},[t._v("账号列表")]),t._v(" "),n("div",{staticClass:"opt-btn-group"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:t.addAccount}},[t._v("添加账号")])],1)]),t._v(" "),n("el-table",{attrs:{data:t.accountTable,stripe:"","max-height":"450"}},[n("el-table-column",{attrs:{fixed:"",prop:"account",label:"账号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"belongsDepartment",label:"所属分布"}}),t._v(" "),n("el-table-column",{attrs:{prop:"belongsTopLevelDepartment",label:"所属级别"}}),t._v(" "),n("el-table-column",{attrs:{prop:"active",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.active?n("span",[t._v("离职")]):n("span",[t._v("在职")])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(n){n.preventDefault(),t.modifyRow(e.row,t.accountTable)}}},[t._v("\n          修改\n        ")]),t._v(" "),n("el-button",{attrs:{size:"mini"},nativeOn:{click:function(n){n.preventDefault(),t.deleteRow(e.row,t.accountTable)}}},[t._v("\n          删除\n        ")])]}}])})],1)],1)],1)},Et=[],St={render:Bt,staticRenderFns:Et},Lt=St,Rt=n("VU/8"),Nt=Rt(It,Lt,!1,null,null,null),$t=Nt.exports,Mt=n("M4fF"),Pt=n.n(Mt),Ut={name:"ModifyAccount",data:function(){var t=this,e=function(e,n,a){""===n?a(new Error("请输入密码")):(""!==t.accountForm.checkPass&&t.$refs.accountForm.validateField("checkPass"),a())},n=function(e,n,a){""===n?a(new Error("请再次输入密码")):n!==t.accountForm.password?a(new Error("两次输入密码不一致!")):a()},a=/^1[345789]\d{9}$/;return{accountForm:{name:"",account:"",sex:0,phone:"",password:"",checkPass:"",belongsTopLevelDepartment:"",accountLevelName:"",belongsDepartment:"",birthday:"",address:"",active:1},curTopId:"",topDepartments:[],secDepartments:[],positions:[],rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"}],belongsTopLevelDepartment:[{required:!0,message:"请选择隶属部门",trigger:"blur"}],belongsDepartment:[{required:!0,message:"请选择所属分部",trigger:"blur"}],accountLevelName:[{required:!0,message:"请选择所属级别",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],phone:[{required:!0,message:"请输入正确的手机号码",trigger:"blur"},{validator:function(t,e,n){""===e?n(new Error("请输入手机号码")):a.test(e)?n():n(new Error("请输入合法11位手机号码"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:e,trigger:"blur"}],checkPass:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:n,trigger:"blur"}]},accountId:"add"!==this.$route.params.id?this.$route.params.id:""}},computed:{accessToken:function(){return this.$store.getters.token}},methods:{saveAccount:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;if(""!==e.accountId){var n=Pt.a.omit(e.accountForm,"id","checkPass","accountLevel","createdAt","updatedAt");xt.modifySaveAccount(e.accessToken,n,e.accountId).then(function(t){e.$message({message:"修改账号成功！",type:"success"}),e.$router.push({name:"Account"})})}else{var a=Pt.a.omit(e.accountForm,"checkPass");xt.addSaveAccount(e.accessToken,a).then(function(t){e.$message({message:"添加账号成功！",type:"success"}),e.$router.push({name:"Account"})})}})},cancelOperate:function(){this.$router.push({name:"Account"})},getDepartment:function(){var t=this;xt.getDepartmentTop(this.accessToken,0).then(function(e){t.topDepartments=e.data})},getSeconds:function(t){var e=this;this.accountForm.belongsDepartment="",this.accountForm.accountLevelName="",this.curTopId=t.id,this.accountForm.belongsTopLevelDepartment=t.name,xt.getDepartmentByLevel(this.accessToken,t.id).then(function(t){e.secDepartments=t.data})},getThirds:function(t){var e=this;this.accountForm.accountLevelName="",this.accountForm.belongsDepartment=t.name,xt.getPositionById(this.accessToken,this.curTopId).then(function(t){e.positions=t.data})},getAccountDetail:function(t){var e=this;xt.getAccountById(this.accessToken,t).then(function(t){e.accountForm=t.data,e.accountForm.checkPass=t.data.password})}},created:function(){this.getDepartment()},beforeMount:function(){this.accountId&&""!==this.accountId&&this.getAccountDetail(this.accountId)}},Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content account"},[n("div",{staticClass:"page-toolbar"},[n("div",{staticClass:"page-title"},["add"!==this.$route.params.id?n("span",[t._v("修改账号")]):n("span",[t._v("添加账号")])])]),t._v(" "),n("div",{staticClass:"page-form-content"},[n("el-form",{ref:"accountForm",attrs:{rules:t.rules,model:t.accountForm,"label-width":"120px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{model:{value:t.accountForm.name,callback:function(e){t.$set(t.accountForm,"name",e)},expression:"accountForm.name"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"账号",prop:"account"}},[n("el-input",{model:{value:t.accountForm.account,callback:function(e){t.$set(t.accountForm,"account",e)},expression:"accountForm.account"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"性别",prop:"sex"}},[n("el-radio-group",{model:{value:t.accountForm.sex,callback:function(e){t.$set(t.accountForm,"sex",e)},expression:"accountForm.sex"}},[n("el-radio",{attrs:{label:0}},[t._v("男")]),t._v(" "),n("el-radio",{attrs:{label:1}},[t._v("女")])],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[n("el-input",{attrs:{maxlength:11},model:{value:t.accountForm.phone,callback:function(e){t.$set(t.accountForm,"phone",e)},expression:"accountForm.phone"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.accountForm.password,callback:function(e){t.$set(t.accountForm,"password",e)},expression:"accountForm.password"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[n("el-input",{attrs:{type:"password"},model:{value:t.accountForm.checkPass,callback:function(e){t.$set(t.accountForm,"checkPass",e)},expression:"accountForm.checkPass"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"隶属部门",prop:"belongsTopLevelDepartment"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getSeconds},model:{value:t.accountForm.belongsTopLevelDepartment,callback:function(e){t.$set(t.accountForm,"belongsTopLevelDepartment",e)},expression:"accountForm.belongsTopLevelDepartment"}},t._l(t.topDepartments,function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t}})}))],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[n("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.accountForm.birthday,callback:function(e){t.$set(t.accountForm,"birthday",e)},expression:"accountForm.birthday"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"所属分部",prop:"belongsDepartment"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getThirds},model:{value:t.accountForm.belongsDepartment,callback:function(e){t.$set(t.accountForm,"belongsDepartment",e)},expression:"accountForm.belongsDepartment"}},t._l(t.secDepartments,function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t}})}))],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"家庭住址",prop:"address"}},[n("el-input",{model:{value:t.accountForm.address,callback:function(e){t.$set(t.accountForm,"address",e)},expression:"accountForm.address"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"所属级别",prop:"accountLevelName"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.accountForm.accountLevelName,callback:function(e){t.$set(t.accountForm,"accountLevelName",e)},expression:"accountForm.accountLevelName"}},t._l(t.positions,function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})}))],1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"状态",prop:"active"}},[n("el-radio-group",{model:{value:t.accountForm.active,callback:function(e){t.$set(t.accountForm,"active",e)},expression:"accountForm.active"}},[n("el-radio",{attrs:{label:1}},[t._v("在职")]),t._v(" "),n("el-radio",{attrs:{label:0,disabled:"add"===this.$route.params.id}},[t._v("离职")])],1)],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"page-opt-bottom"},[n("el-button",{staticClass:"form-opt-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){t.saveAccount("accountForm")}}},[t._v("确定")]),t._v(" "),n("el-button",{staticClass:"form-opt-btn",attrs:{size:"small"},on:{click:t.cancelOperate}},[t._v("取消")])],1)],1)])},Ot=[],Vt={render:Ht,staticRenderFns:Ot},qt=Vt,Jt=n("VU/8"),zt=Jt(Ut,qt,!1,null,null,null),jt=zt.exports,Qt=[{path:"/account",name:"Account",component:$t},{path:"/account/:id",name:"ModifyAccount",component:jt}],Gt={getDepartmentAll:function(t){return Tt.get("/service/v1/department/listAll",{headers:{token:t}})},getDepartmentTop:function(t,e){return Tt.get("/service/v1/department/level/"+e,{headers:{token:t}})},getDepartmentByLevel:function(t,e){return Tt.get("/service/v1/department/id/"+e+"/children",{headers:{token:t}})},getDepartmentDet:function(t,e){return Tt.get("/service/v1/department/id/"+e,{headers:{token:t}})},modifySaveDepart:function(t,e,n){return Tt.put("/service/v1/department/id/"+n,Ct.a.stringify(e),{headers:{token:t}})},addSaveDepartment:function(t,e){return Tt.post("/service/v1/department",Ct.a.stringify(e),{headers:{token:t}})},deleteDepartment:function(t,e){return Tt.delete("/service/v1/department/id/"+e,{headers:{token:t}})}},Zt={components:{DepartmentNav:_t},data:function(){return{departData:[],departmentTable:[],dialogFormVisible:!1,action:"add",actionId:"",currentDepartment:{},departmentForm:{parentDepartmentName:"",departmentName:""},departmentTop:[]}},computed:{accessToken:function(){return this.$store.getters.token}},methods:{addDepartment:function(){this.dialogFormVisible=!0,this.action="add"},modifyRow:function(t){this.dialogFormVisible=!0,this.action="modify",this.actionId=t.id,this.departmentForm.parentDepartmentName=t.belongDepart,this.departmentForm.departmentName=t.name},deleteRow:function(t){var e=this;this.$confirm("是否确定删除该部门？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Gt.deleteDepartment(e.accessToken,t.id).then(function(t){e.getInfoByDepart(e.currentDepartment),e.getDepartmentList()})}).catch(function(){})},openDepartDialog:function(){var t=this;Gt.getDepartmentTop(this.accessToken,0).then(function(e){t.departmentTop=e.data})},closeDepartDialog:function(){this.departmentForm.parentDepartmentName="",this.departmentForm.departmentName=""},saveAdd:function(){var t=this;Gt.addSaveDepartment(this.accessToken,this.departmentForm).then(function(e){t.dialogFormVisible=!1,t.getInfoByDepart(t.currentDepartment)})},saveEdit:function(){var t=this;Gt.modifySaveDepart(this.accessToken,this.departmentForm,this.actionId).then(function(e){t.getInfoByDepart(t.currentDepartment),t.dialogFormVisible=!1})},saveDepartment:function(){"add"===this.action?this.saveAdd():this.saveEdit(),this.getDepartmentList()},getDepartmentList:function(){var t=this;Gt.getDepartmentAll(this.accessToken).then(function(e){t.departData=e.data,t.currentDepartment.id||(t.currentDepartment=t.departData[0],t.getDepartmentTable(t.departData[0].id,t.departData[0]))})},getDepartmentTable:function(t,e){var n=this;Gt.getDepartmentByLevel(this.accessToken,t).then(function(t){n.departmentTable=t.data,n.departmentTable.forEach(function(t){t.belongDepart=e.name})})},getInfoByDepart:function(t){this.currentDepartment=t,this.getDepartmentTable(t.id,t)}},beforeMount:function(){this.getDepartmentList()},mounted:function(){}},Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content page-left-nav account"},[n("department-nav",{attrs:{nav:t.departData,isSimpleData:!0},on:{getByDepartment:t.getInfoByDepart}}),t._v(" "),n("div",{staticClass:"table-container"},[n("div",{staticClass:"page-toolbar"},[n("div",{staticClass:"page-title"},[t._v("部门列表")]),t._v(" "),n("div",{staticClass:"opt-btn-group"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:t.addDepartment}},[t._v("添加部门")])],1)]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.departmentTable,stripe:"","max-height":"450"}},[n("el-table-column",{attrs:{prop:"belongDepart",label:"隶属部门"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"部门名"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(n){n.preventDefault(),t.modifyRow(e.row,t.departmentTable)}}},[t._v("\n            修改\n          ")]),t._v(" "),n("el-button",{attrs:{size:"mini"},nativeOn:{click:function(n){n.preventDefault(),t.deleteRow(e.row,t.departmentTable)}}},[t._v("\n            删除\n          ")])]}}])})],1),t._v(" "),n("el-dialog",{staticClass:"department-dialog",attrs:{title:"add"===t.action?"添加部门":"修改部门","modal-append-to-body":!1,width:"30%",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},open:t.openDepartDialog,close:t.closeDepartDialog}},[n("el-form",{ref:"departmentForm",attrs:{model:t.departmentForm,"label-width":"72px"}},[n("el-form-item",{attrs:{label:"隶属部门"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.departmentForm.parentDepartmentName,callback:function(e){t.$set(t.departmentForm,"parentDepartmentName",e)},expression:"departmentForm.parentDepartmentName"}},t._l(t.departmentTop,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"部门名"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.departmentForm.departmentName,callback:function(e){t.$set(t.departmentForm,"departmentName",e)},expression:"departmentForm.departmentName"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"form-opt-btn",attrs:{size:"small",type:"primary"},on:{click:t.saveDepartment}},[t._v("确 定")]),t._v(" "),n("el-button",{staticClass:"form-opt-btn",attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")])],1)],1)],1)],1)},Kt=[],Yt={render:Wt,staticRenderFns:Kt},Xt=Yt,te=n("VU/8"),ee=l,ne=te(Zt,Xt,!1,ee,"data-v-4311bdf9",null),ae=ne.exports,oe=[{path:"/department",name:"Department",component:ae}],re={getUserInfo:function(t,e){return Tt.get("/service/v1/user/account/"+e,{headers:{token:t}})}},se={name:"UserInfo",data:function(){return{userAvatar:"",userForm:{}}},computed:{accessToken:function(){return this.$store.getters.token},accountName:function(){return JSON.parse(sessionStorage.getItem("loginInfo")).account}},methods:{getAccountInfo:function(){var t=this;re.getUserInfo(this.accessToken,this.accountName).then(function(e){t.userForm=e.data,0===t.userForm.sex?t.userAvatar="../../../static/imgPage/img_man.png":t.userAvatar="../../../static/imgPage/img_women.png"})}},beforeMount:function(){this.getAccountInfo()}},ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content user-info"},[t._m(0),t._v(" "),n("div",{staticClass:"page-form-content"},[n("el-form",{ref:"userForm",attrs:{model:t.userForm}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"user-avatar"},[n("img",{attrs:{src:t.userAvatar,alt:""}})])]),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"姓名"}},[n("span",[t._v(t._s(t.userForm.name))])]),t._v(" "),n("el-form-item",{attrs:{label:"性别"}},[0===t.userForm.sex?n("span",[t._v("男")]):n("span",[t._v("女")])]),t._v(" "),n("el-form-item",{attrs:{label:"手机号码"}},[n("span",[t._v(t._s(t.userForm.phone))])])],1),t._v(" "),n("el-col",{attrs:{span:14}},[n("el-form-item",{attrs:{label:"出生日期"}},[n("span",[t._v(t._s(t.userForm.birthday))])]),t._v(" "),n("el-form-item",{attrs:{label:"家庭住址"}},[n("span",[t._v(t._s(t.userForm.address))])])],1)],1)],1)],1),t._v(" "),t._m(1),t._v(" "),n("div",{staticClass:"page-form-content",staticStyle:{"padding-left":"12px"}},[n("el-form",{attrs:{model:t.userForm}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"账号"}},[n("span",[t._v(t._s(t.userForm.account))])]),t._v(" "),n("el-form-item",{attrs:{label:"状态"}},[1===t.userForm.active?n("span",[t._v("在职")]):n("span",[t._v("离职")])]),t._v(" "),n("el-form-item",{attrs:{label:"隶属部门"}},[n("span",[t._v(t._s(t.userForm.belongsTopLevelDepartment))])]),t._v(" "),n("el-form-item",{attrs:{label:"所属分部"}},[n("span",[t._v(t._s(t.userForm.belongsDepartment))])]),t._v(" "),n("el-form-item",{attrs:{label:"岗位级别"}},[n("span",[t._v(t._s(t.userForm.accountLevelName))])]),t._v(" "),n("el-form-item",{attrs:{label:"最近登录时间"}},[n("span",[t._v(t._s(t.userForm.updatedAt))])])],1)],1)],1)],1)])},ce=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-toolbar"},[n("div",{staticClass:"page-title"},[n("span",[t._v("基本信息")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-toolbar"},[n("div",{staticClass:"page-title"},[n("span",[t._v("账号信息")])])])}],le={render:ie,staticRenderFns:ce},ue=le,me=n("VU/8"),pe=me(se,ue,!1,null,null,null),de=pe.exports,fe=[{path:"/userInfo",name:"UserInfo",component:de}];u.default.use(j.a);var ve=new j.a({mode:"",base:"/erp",routes:[].concat(z()(mt),z()(nt),z()(Qt),z()(oe),z()(fe))}),ge=n("mvHQ"),he=n.n(ge),be={loginByUsername:function(t,e){return Tt.get("/service/v1/user/account/"+t+"/token",{params:e})}},_e={state:{name:"",status:"",code:"",token:function(){return v.a.get(g)}(),sidebar:[]},mutations:{SET_NAME:function(t,e){t.name=e},SET_CODE:function(t,e){t.code=e},SET_TOKEN:function(t,e){t.token=e},SET_STATUS:function(t,e){t.status=e},SET_SIDEBAR:function(t,e){t.sidebar=e}},actions:{LoginByUsername:function(t,e){var n=t.commit;return o(),new kt.a(function(t,o){be.loginByUsername(e.account,e).then(function(o){var r=o.data;r.account=e.account,sessionStorage.setItem("loginInfo",he()(r)),n("SET_SIDEBAR",o.data.sideBarMenu),n("SET_TOKEN",o.data.token),a(o.data.token),t()}).catch(function(t){o(t)})})},LoginOut:function(){return new kt.a(function(t,e){o()})}}},De=_e,ke={sidebar:function(t){return t.user.sidebar},token:function(t){return t.user.token}},Fe=ke;u.default.use(m.a);var ye=new m.a.Store({modules:{user:De},getters:Fe}),Ae=ye;u.default.config.productionTip=!1,u.default.prototype.router=ve,u.default.use(m.a),u.default.use(d.a),new u.default({el:"#app",router:ve,store:Ae,template:"<App/>",components:{App:q}})},T425:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAcCAYAAAF3xY20AAAAAXNSR0IArs4c6QAABVVJREFUSA29lm1ollUYgN853RZu6soyTW0mTlifbstlaZqLdJJouvJHHyZkuSCDoA9Byn4Y/ZO0SAP7/jCYWflnkugYmlmObaUrNFIbIy1ty0VZ6tZ1nT3Pu8dtgRB0w/Xe59zn6z73uc953lSqt3R1y3LUHzAqwzqd6uFlmDMgGpGFzoDSqJ5QjMh1WCTlA2nLhz3wPRxxjmIYCpOhOhV1LUBPgdkwAB6Dm6ArdiOP3sdgcAaCfQPlZmiPZyjE2AFfRXoT+gw00Kl/oXF6aKFwJxTDDMjUiF4MRiCl127lPZjE8ueihn3Usyln2nu+RuR3jLFPW6nvg7Y4dl/S9p0dEJc5DWXMmO/0ytfgNpVaqIDLodUpddJlhkMejIMfwGimDMov6EEQdqCxHxmBzRV2wF3wJ1xkTGOnXaEMKqENqmAhhFXQI6EBJsBoUC5jkhAmtXIA1kEdzIZqVvgNrawCs2Em6G0HtDPJqbQHGCzHQbGaFuwmSGOkd6M9j8N2iMPs4ELqe9C6uhl+tgP6V9ReOAijoRLGQfAuPQEG9/sTrIFRcCkoHtECKIIquBdMk5AqnsIZKp5AbFQ7cWekz0UalRYvVCMxKklbLrTAgkuTfQdiMA9yksZeZWNRBw+yoit701oo1tjPLeiyW7gWshOcpexAZRpMZdBqup+i7A3dQH1ZfIxOtACWwGkwiebSyXaTZzB4QzPhR/A6BwmnwEx68SoMg6dgEdxIR1PY4/OqHaKfAX0FptM2E92TB5Q9jRlQDldBJwOOo3MhRbmIQV7Jw3ALbKQ+MXhARbHsYCkGU1ZZ7Q+dbTehCmBrpC8JMaCiNpD9Cm0VMBbWwnZQbrZzOAXcU++kbnQVY7IN80rsHvMzMAsUY9VKm7E5b4K/qW8Bc8Jc192TYFDr4AHoYmALk9o3h3Jn7xg00FAPV4Nt74LejAEnu4fBnoy2IMktxDn/IS1+DXwwvGCPwlvgi+TKL4DJ5IvUmbz/H2BcCO/DdTCHDpNY8RHKR8EtKOH57S72pLI3T7fMhayo0VR2gb8StqgppH6mHriF4bH1P2iDe5K5CphDR+bBbmzG0xR5GvUc3IbNw0lLiGFU+wbtzXUXTiKx9C5n0JANasVXrwq2QfzGNLHYDSxu3UXboRouhpW0hTQKiUwnZR7o0F4rFyDxQszXI4ybBvf1WEIEnLsZHoa54NPcLVRima+FShbsBD9+JyCWYxR8SQ6CmWVfHV4MbWB+7wLlYyiBHPAlqoMtsALiqDlFSJJQSPyYRBPAtDYjDb9J5kDvx+1giitef0Pq0RWCOzP5PiHE9SxWQVln/cybkGOhBvsd6BX0eTF5BHEEcungbmvBJ7E0wZOUleeZIC3Uh0C8+2cpG8UmuB58j/1KdsJ6GAT7QVmbfAniCd3tfjgOXl51zBHKH0EzJGUJlSaw3/1Rw+PoRvBGqG2zjy/KSJhFBJb3iQAN2vwj4Nfj30g7Tp+hMB7SNufoLbT7t+c1uCLZlnyJgp0OEyn44aiBzeCZetbmgPol2A7+a5uKXgaVsJT6InQZfAZJ8V/tLngHTM5Sdh+udn9ex0n3BZ07YCP4WOnAengdNoHyOWSBb6xH46djGNwaUYE2ab8FnXc9ca4gfSKANXZgMmWzvQ0KYAycgHwoAGUN3A3mjZG4Eo5CLShToAj626jt/V7DhyK7O30D3gZ3VQ5GwhC/SRjz0B7HIVgHn0IpDAWPSFG7W51vhT6SfIqfoHUHhI8l2qf2GjDjfWqNlm0jYAi0gJN7x8eDmW77eSGmrpwF/2vq5AEoIQeMWsj4Vezm/xQfqPSR/AMjMG/L/kus1gAAAABJRU5ErkJggg=="},"d/Py":function(t,e){},hlwg:function(t,e){},q9os:function(t,e){},uMhA:function(t,e){},w7nl:function(t,e){}},[0]);
//# sourceMappingURL=app.b75b34b7fabfce1099e1.js.map